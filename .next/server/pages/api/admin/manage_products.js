"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/manage_products";
exports.ids = ["pages/api/admin/manage_products"];
exports.modules = {

/***/ "(api-node)/./lib/auth/authorizeAdmin.js":
/*!************************************!*\
  !*** ./lib/auth/authorizeAdmin.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ROLES: () => (/* binding */ ROLES),\n/* harmony export */   authorizeAdmin: () => (/* binding */ authorizeAdmin),\n/* harmony export */   withAdmin: () => (/* binding */ withAdmin)\n/* harmony export */ });\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/jwt */ \"next-auth/jwt\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__);\n// lib/auth/authorizeAdmin.js\n\nconst ROLES = {\n    ADMIN: 'ADMIN',\n    USER: 'USER'\n};\n/**\n * Utility ‚Äî detects if request expects JSON response\n */ function wantsJson(req) {\n    const url = req.url || '';\n    const accept = (req.headers?.accept || '').toLowerCase();\n    const xrw = (req.headers?.['x-requested-with'] || '').toLowerCase();\n    return url.startsWith('/api/') || accept.includes('application/json') || xrw === 'xmlhttprequest';\n}\n/**\n * Utility ‚Äî builds safe redirect URL\n */ function safeCallbackUrl(req) {\n    try {\n        const u = new URL(req.url, `http://${req.headers.host || 'localhost'}`);\n        return u.pathname + u.search;\n    } catch  {\n        return '/';\n    }\n}\n/**\n * Express/Next-Connect style middleware for admin authorization.\n * Logs key events and safely handles redirects and JSON responses.\n */ function authorizeAdmin(loginPath = '/admin/login') {\n    return async function guard(req, res, next) {\n        const rid = req.rid || Math.random().toString(36).slice(2, 8);\n        const path = req.url || '';\n        console.log(`\\n[authorizeAdmin] [${rid}] ‚ñ∂ START for ${req.method} ${path}`);\n        try {\n            // Try reading JWT token\n            const token = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__.getToken)({\n                req,\n                secret: process.env.NEXTAUTH_SECRET\n            });\n            if (!token) {\n                console.warn(`[authorizeAdmin] [${rid}] ‚ö†Ô∏è No token found`);\n                if (wantsJson(req)) return res.status(401).json({\n                    ok: false,\n                    code: 'UNAUTHENTICATED',\n                    error: 'Unauthorized'\n                });\n                const cb = encodeURIComponent(safeCallbackUrl(req));\n                return res.redirect(`${loginPath}?callbackUrl=${cb}`);\n            }\n            // Normalize role\n            const role = String(token.role || 'USER').toUpperCase();\n            console.log(`[authorizeAdmin] [${rid}] ‚úÖ Token found, role=${role}`);\n            // Require ADMIN role\n            if (role !== ROLES.ADMIN) {\n                console.warn(`[authorizeAdmin] [${rid}] ‚õî Forbidden: role=${role}`);\n                if (wantsJson(req)) return res.status(403).json({\n                    ok: false,\n                    code: 'FORBIDDEN',\n                    error: 'Forbidden'\n                });\n                return res.redirect('/403');\n            }\n            // Attach user info to req\n            req.user = {\n                id: token.sub,\n                email: token.email,\n                role\n            };\n            console.log(`[authorizeAdmin] [${rid}] ‚úÖ Authorized ADMIN user: ${token.email}`);\n            return next();\n        } catch (err) {\n            console.error(`[authorizeAdmin] [${rid}] ‚ùå Token error:`, err);\n            if (wantsJson(req)) return res.status(401).json({\n                ok: false,\n                code: 'TOKEN_ERROR',\n                error: 'Unauthorized'\n            });\n            return res.redirect(loginPath);\n        }\n    };\n}\n/**\n * Wrapper for vanilla Next.js API routes.\n * Example:\n *   export default withAdmin((req, res) => { res.json({ ok: true }) })\n */ function withAdmin(handler, loginPath = '/admin/login') {\n    const mw = authorizeAdmin(loginPath);\n    return async (req, res)=>mw(req, res, async ()=>handler(req, res));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9hdXRoL2F1dGhvcml6ZUFkbWluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsNkJBQTZCO0FBQ1k7QUFFbEMsTUFBTUMsUUFBUTtJQUFFQyxPQUFPO0lBQVNDLE1BQU07QUFBTyxFQUFFO0FBRXREOztDQUVDLEdBQ0QsU0FBU0MsVUFBVUMsR0FBRztJQUNwQixNQUFNQyxNQUFNRCxJQUFJQyxHQUFHLElBQUk7SUFDdkIsTUFBTUMsU0FBUyxDQUFDRixJQUFJRyxPQUFPLEVBQUVELFVBQVUsRUFBQyxFQUFHRSxXQUFXO0lBQ3RELE1BQU1DLE1BQU0sQ0FBQ0wsSUFBSUcsT0FBTyxFQUFFLENBQUMsbUJBQW1CLElBQUksRUFBQyxFQUFHQyxXQUFXO0lBQ2pFLE9BQU9ILElBQUlLLFVBQVUsQ0FBQyxZQUFZSixPQUFPSyxRQUFRLENBQUMsdUJBQXVCRixRQUFRO0FBQ25GO0FBRUE7O0NBRUMsR0FDRCxTQUFTRyxnQkFBZ0JSLEdBQUc7SUFDMUIsSUFBSTtRQUNGLE1BQU1TLElBQUksSUFBSUMsSUFBSVYsSUFBSUMsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFRCxJQUFJRyxPQUFPLENBQUNRLElBQUksSUFBSSxhQUFhO1FBQ3RFLE9BQU9GLEVBQUVHLFFBQVEsR0FBR0gsRUFBRUksTUFBTTtJQUM5QixFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNDLGVBQWVDLFlBQVksY0FBYztJQUN2RCxPQUFPLGVBQWVDLE1BQU1oQixHQUFHLEVBQUVpQixHQUFHLEVBQUVDLElBQUk7UUFDeEMsTUFBTUMsTUFBTW5CLElBQUltQixHQUFHLElBQUlDLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLEtBQUssQ0FBQyxHQUFHO1FBQzNELE1BQU1DLE9BQU94QixJQUFJQyxHQUFHLElBQUk7UUFFeEJ3QixRQUFRQyxHQUFHLENBQUMsQ0FBQyxvQkFBb0IsRUFBRVAsSUFBSSxjQUFjLEVBQUVuQixJQUFJMkIsTUFBTSxDQUFDLENBQUMsRUFBRUgsTUFBTTtRQUUzRSxJQUFJO1lBQ0Ysd0JBQXdCO1lBQ3hCLE1BQU1JLFFBQVEsTUFBTWpDLHVEQUFRQSxDQUFDO2dCQUFFSztnQkFBSzZCLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtZQUFDO1lBQ3hFLElBQUksQ0FBQ0osT0FBTztnQkFDVkgsUUFBUVEsSUFBSSxDQUFDLENBQUMsa0JBQWtCLEVBQUVkLElBQUksbUJBQW1CLENBQUM7Z0JBQzFELElBQUlwQixVQUFVQyxNQUFNLE9BQU9pQixJQUFJaUIsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsSUFBSTtvQkFBT0MsTUFBTTtvQkFBbUJDLE9BQU87Z0JBQWU7Z0JBQzVHLE1BQU1DLEtBQUtDLG1CQUFtQmhDLGdCQUFnQlI7Z0JBQzlDLE9BQU9pQixJQUFJd0IsUUFBUSxDQUFDLEdBQUcxQixVQUFVLGFBQWEsRUFBRXdCLElBQUk7WUFDdEQ7WUFFQSxpQkFBaUI7WUFDakIsTUFBTUcsT0FBT0MsT0FBT2YsTUFBTWMsSUFBSSxJQUFJLFFBQVFFLFdBQVc7WUFDckRuQixRQUFRQyxHQUFHLENBQUMsQ0FBQyxrQkFBa0IsRUFBRVAsSUFBSSxzQkFBc0IsRUFBRXVCLE1BQU07WUFFbkUscUJBQXFCO1lBQ3JCLElBQUlBLFNBQVM5QyxNQUFNQyxLQUFLLEVBQUU7Z0JBQ3hCNEIsUUFBUVEsSUFBSSxDQUFDLENBQUMsa0JBQWtCLEVBQUVkLElBQUksb0JBQW9CLEVBQUV1QixNQUFNO2dCQUNsRSxJQUFJM0MsVUFBVUMsTUFBTSxPQUFPaUIsSUFBSWlCLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLElBQUk7b0JBQU9DLE1BQU07b0JBQWFDLE9BQU87Z0JBQVk7Z0JBQ25HLE9BQU9yQixJQUFJd0IsUUFBUSxDQUFDO1lBQ3RCO1lBRUEsMEJBQTBCO1lBQzFCekMsSUFBSTZDLElBQUksR0FBRztnQkFBRUMsSUFBSWxCLE1BQU1tQixHQUFHO2dCQUFFQyxPQUFPcEIsTUFBTW9CLEtBQUs7Z0JBQUVOO1lBQUs7WUFFckRqQixRQUFRQyxHQUFHLENBQUMsQ0FBQyxrQkFBa0IsRUFBRVAsSUFBSSwyQkFBMkIsRUFBRVMsTUFBTW9CLEtBQUssRUFBRTtZQUMvRSxPQUFPOUI7UUFDVCxFQUFFLE9BQU8rQixLQUFLO1lBQ1p4QixRQUFRYSxLQUFLLENBQUMsQ0FBQyxrQkFBa0IsRUFBRW5CLElBQUksZ0JBQWdCLENBQUMsRUFBRThCO1lBQzFELElBQUlsRCxVQUFVQyxNQUFNLE9BQU9pQixJQUFJaUIsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsSUFBSTtnQkFBT0MsTUFBTTtnQkFBZUMsT0FBTztZQUFlO1lBQ3hHLE9BQU9yQixJQUFJd0IsUUFBUSxDQUFDMUI7UUFDdEI7SUFDRjtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLFNBQVNtQyxVQUFVQyxPQUFPLEVBQUVwQyxZQUFZLGNBQWM7SUFDM0QsTUFBTXFDLEtBQUt0QyxlQUFlQztJQUMxQixPQUFPLE9BQU9mLEtBQUtpQixNQUFRbUMsR0FBR3BELEtBQUtpQixLQUFLLFVBQVlrQyxRQUFRbkQsS0FBS2lCO0FBQ25FIiwic291cmNlcyI6WyIvVXNlcnMvZW1vbnRhemVyaS9Eb2N1bWVudHMvcHJvamVjdHMvc2hlbGwtc3Rvcmllcy1zdHVkaW8vbGliL2F1dGgvYXV0aG9yaXplQWRtaW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL2F1dGgvYXV0aG9yaXplQWRtaW4uanNcbmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnbmV4dC1hdXRoL2p3dCc7XG5cbmV4cG9ydCBjb25zdCBST0xFUyA9IHsgQURNSU46ICdBRE1JTicsIFVTRVI6ICdVU0VSJyB9O1xuXG4vKipcbiAqIFV0aWxpdHkg4oCUIGRldGVjdHMgaWYgcmVxdWVzdCBleHBlY3RzIEpTT04gcmVzcG9uc2VcbiAqL1xuZnVuY3Rpb24gd2FudHNKc29uKHJlcSkge1xuICBjb25zdCB1cmwgPSByZXEudXJsIHx8ICcnO1xuICBjb25zdCBhY2NlcHQgPSAocmVxLmhlYWRlcnM/LmFjY2VwdCB8fCAnJykudG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgeHJ3ID0gKHJlcS5oZWFkZXJzPy5bJ3gtcmVxdWVzdGVkLXdpdGgnXSB8fCAnJykudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIHVybC5zdGFydHNXaXRoKCcvYXBpLycpIHx8IGFjY2VwdC5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpIHx8IHhydyA9PT0gJ3htbGh0dHByZXF1ZXN0Jztcbn1cblxuLyoqXG4gKiBVdGlsaXR5IOKAlCBidWlsZHMgc2FmZSByZWRpcmVjdCBVUkxcbiAqL1xuZnVuY3Rpb24gc2FmZUNhbGxiYWNrVXJsKHJlcSkge1xuICB0cnkge1xuICAgIGNvbnN0IHUgPSBuZXcgVVJMKHJlcS51cmwsIGBodHRwOi8vJHtyZXEuaGVhZGVycy5ob3N0IHx8ICdsb2NhbGhvc3QnfWApO1xuICAgIHJldHVybiB1LnBhdGhuYW1lICsgdS5zZWFyY2g7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiAnLyc7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHByZXNzL05leHQtQ29ubmVjdCBzdHlsZSBtaWRkbGV3YXJlIGZvciBhZG1pbiBhdXRob3JpemF0aW9uLlxuICogTG9ncyBrZXkgZXZlbnRzIGFuZCBzYWZlbHkgaGFuZGxlcyByZWRpcmVjdHMgYW5kIEpTT04gcmVzcG9uc2VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXV0aG9yaXplQWRtaW4obG9naW5QYXRoID0gJy9hZG1pbi9sb2dpbicpIHtcbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIGd1YXJkKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgY29uc3QgcmlkID0gcmVxLnJpZCB8fCBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCA4KTtcbiAgICBjb25zdCBwYXRoID0gcmVxLnVybCB8fCAnJztcblxuICAgIGNvbnNvbGUubG9nKGBcXG5bYXV0aG9yaXplQWRtaW5dIFske3JpZH1dIOKWtiBTVEFSVCBmb3IgJHtyZXEubWV0aG9kfSAke3BhdGh9YCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gVHJ5IHJlYWRpbmcgSldUIHRva2VuXG4gICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFRva2VuKHsgcmVxLCBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCB9KTtcbiAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBbYXV0aG9yaXplQWRtaW5dIFske3JpZH1dIOKaoO+4jyBObyB0b2tlbiBmb3VuZGApO1xuICAgICAgICBpZiAod2FudHNKc29uKHJlcSkpIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG9rOiBmYWxzZSwgY29kZTogJ1VOQVVUSEVOVElDQVRFRCcsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgY29uc3QgY2IgPSBlbmNvZGVVUklDb21wb25lbnQoc2FmZUNhbGxiYWNrVXJsKHJlcSkpO1xuICAgICAgICByZXR1cm4gcmVzLnJlZGlyZWN0KGAke2xvZ2luUGF0aH0/Y2FsbGJhY2tVcmw9JHtjYn1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gTm9ybWFsaXplIHJvbGVcbiAgICAgIGNvbnN0IHJvbGUgPSBTdHJpbmcodG9rZW4ucm9sZSB8fCAnVVNFUicpLnRvVXBwZXJDYXNlKCk7XG4gICAgICBjb25zb2xlLmxvZyhgW2F1dGhvcml6ZUFkbWluXSBbJHtyaWR9XSDinIUgVG9rZW4gZm91bmQsIHJvbGU9JHtyb2xlfWApO1xuXG4gICAgICAvLyBSZXF1aXJlIEFETUlOIHJvbGVcbiAgICAgIGlmIChyb2xlICE9PSBST0xFUy5BRE1JTikge1xuICAgICAgICBjb25zb2xlLndhcm4oYFthdXRob3JpemVBZG1pbl0gWyR7cmlkfV0g4puUIEZvcmJpZGRlbjogcm9sZT0ke3JvbGV9YCk7XG4gICAgICAgIGlmICh3YW50c0pzb24ocmVxKSkgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgb2s6IGZhbHNlLCBjb2RlOiAnRk9SQklEREVOJywgZXJyb3I6ICdGb3JiaWRkZW4nIH0pO1xuICAgICAgICByZXR1cm4gcmVzLnJlZGlyZWN0KCcvNDAzJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEF0dGFjaCB1c2VyIGluZm8gdG8gcmVxXG4gICAgICByZXEudXNlciA9IHsgaWQ6IHRva2VuLnN1YiwgZW1haWw6IHRva2VuLmVtYWlsLCByb2xlIH07XG5cbiAgICAgIGNvbnNvbGUubG9nKGBbYXV0aG9yaXplQWRtaW5dIFske3JpZH1dIOKchSBBdXRob3JpemVkIEFETUlOIHVzZXI6ICR7dG9rZW4uZW1haWx9YCk7XG4gICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihgW2F1dGhvcml6ZUFkbWluXSBbJHtyaWR9XSDinYwgVG9rZW4gZXJyb3I6YCwgZXJyKTtcbiAgICAgIGlmICh3YW50c0pzb24ocmVxKSkgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgb2s6IGZhbHNlLCBjb2RlOiAnVE9LRU5fRVJST1InLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICByZXR1cm4gcmVzLnJlZGlyZWN0KGxvZ2luUGF0aCk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFdyYXBwZXIgZm9yIHZhbmlsbGEgTmV4dC5qcyBBUEkgcm91dGVzLlxuICogRXhhbXBsZTpcbiAqICAgZXhwb3J0IGRlZmF1bHQgd2l0aEFkbWluKChyZXEsIHJlcykgPT4geyByZXMuanNvbih7IG9rOiB0cnVlIH0pIH0pXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoQWRtaW4oaGFuZGxlciwgbG9naW5QYXRoID0gJy9hZG1pbi9sb2dpbicpIHtcbiAgY29uc3QgbXcgPSBhdXRob3JpemVBZG1pbihsb2dpblBhdGgpO1xuICByZXR1cm4gYXN5bmMgKHJlcSwgcmVzKSA9PiBtdyhyZXEsIHJlcywgYXN5bmMgKCkgPT4gaGFuZGxlcihyZXEsIHJlcykpO1xufVxuXG5cblxuXG5cblxuIl0sIm5hbWVzIjpbImdldFRva2VuIiwiUk9MRVMiLCJBRE1JTiIsIlVTRVIiLCJ3YW50c0pzb24iLCJyZXEiLCJ1cmwiLCJhY2NlcHQiLCJoZWFkZXJzIiwidG9Mb3dlckNhc2UiLCJ4cnciLCJzdGFydHNXaXRoIiwiaW5jbHVkZXMiLCJzYWZlQ2FsbGJhY2tVcmwiLCJ1IiwiVVJMIiwiaG9zdCIsInBhdGhuYW1lIiwic2VhcmNoIiwiYXV0aG9yaXplQWRtaW4iLCJsb2dpblBhdGgiLCJndWFyZCIsInJlcyIsIm5leHQiLCJyaWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzbGljZSIsInBhdGgiLCJjb25zb2xlIiwibG9nIiwibWV0aG9kIiwidG9rZW4iLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIiwid2FybiIsInN0YXR1cyIsImpzb24iLCJvayIsImNvZGUiLCJlcnJvciIsImNiIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVkaXJlY3QiLCJyb2xlIiwiU3RyaW5nIiwidG9VcHBlckNhc2UiLCJ1c2VyIiwiaWQiLCJzdWIiLCJlbWFpbCIsImVyciIsIndpdGhBZG1pbiIsImhhbmRsZXIiLCJtdyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/auth/authorizeAdmin.js\n");

/***/ }),

/***/ "(api-node)/./lib/middleware/createAdminHandler.js":
/*!**********************************************!*\
  !*** ./lib/middleware/createAdminHandler.js ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAdminHandler: () => (/* binding */ createAdminHandler)\n/* harmony export */ });\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-connect */ \"next-connect\");\n/* harmony import */ var _lib_auth_authorizeAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth/authorizeAdmin */ \"(api-node)/./lib/auth/authorizeAdmin.js\");\n/* harmony import */ var _lib_middleware_rateLimiter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/middleware/rateLimiter */ \"(api-node)/./lib/middleware/rateLimiter.js\");\n/* harmony import */ var _requestId__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./requestId */ \"(api-node)/./lib/middleware/requestId.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([next_connect__WEBPACK_IMPORTED_MODULE_0__]);\nnext_connect__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// /lib/middleware/createAdminHandler.js\n\n\n\n\nconst isObj = (v)=>v && typeof v === \"object\";\nconst toInt = (v, d)=>{\n    const n = Number(v);\n    return Number.isFinite(n) && n >= 0 ? Math.trunc(n) : d;\n};\n// Graceful async wrapper for rateLimiter\nfunction wrapRateLimiter(rateLimiterFn, opts) {\n    return async (req, res, next)=>{\n        try {\n            let passed = false;\n            await new Promise((resolve)=>{\n                rateLimiterFn(req, res, ()=>{\n                    passed = true;\n                    resolve();\n                }, opts);\n            });\n            if (!res.headersSent && passed) return next();\n            if (!res.headersSent) next();\n        } catch (e) {\n            console.error(\"[rateLimiter] üí• Error:\", e);\n            if (!res.headersSent) res.status(429).json({\n                error: \"Rate limit exceeded or error\"\n            });\n        }\n    };\n}\nfunction createAdminHandler(options = {}) {\n    const rawRL = isObj(options.rateLimit) ? options.rateLimit : {};\n    const rateLimit = {\n        limit: toInt(rawRL.limit, 60),\n        window: toInt(rawRL.window, 60)\n    };\n    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Error Handling ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */ const onError = options.onError || ((err, req, res)=>{\n        const status = Number(err?.statusCode ?? err?.status ?? 500) || 500;\n        const message = typeof err?.message === \"string\" ? err.message : \"Internal Server Error\";\n        console.error(`‚ùå [Admin API Error] (${req.method} ${req.url}):`, message);\n        if (!res.headersSent) res.status(status).json({\n            success: false,\n            error: message,\n            code: status\n        });\n    });\n    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Fallback for unmatched methods ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */ const onNoMatch = options.onNoMatch || ((req, res)=>{\n        console.warn(`‚ö†Ô∏è [NO MATCH] ${req.method} ${req.url}`);\n        res.status(405).json({\n            success: false,\n            error: `Method ${req.method} not allowed`\n        });\n    });\n    const handler = (0,next_connect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n        onError,\n        onNoMatch\n    });\n    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Add middlewares ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */ handler.use(_requestId__WEBPACK_IMPORTED_MODULE_3__.withRequestId);\n    // Development request logger\n    handler.use({\n        \"createAdminHandler.use\": (req, _res, next)=>{\n            if (!req.url?.startsWith(\"/_next\")) {\n                console.log(`\\nüî• [Request Start] [${req.rid}] ${req.method} ${req.url}`);\n            }\n            next();\n        }\n    }[\"createAdminHandler.use\"]);\n    // OPTIONS preflight\n    handler.use({\n        \"createAdminHandler.use\": (req, res, next)=>{\n            if (req.method === \"OPTIONS\") {\n                res.setHeader(\"Allow\", \"GET,POST,PUT,PATCH,DELETE,OPTIONS\");\n                console.log(`[${req.rid}] üïä OPTIONS preflight ‚Üí 204`);\n                return res.status(204).end();\n            }\n            next();\n        }\n    }[\"createAdminHandler.use\"]);\n    // Security headers\n    handler.use({\n        \"createAdminHandler.use\": (req, res, next)=>{\n            res.setHeader(\"Cache-Control\", \"no-store\");\n            res.setHeader(\"Vary\", \"X-Requested-With\");\n            if (!res.getHeader(\"Content-Type\")) {\n                res.setHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n            }\n            next();\n        }\n    }[\"createAdminHandler.use\"]);\n    // Rate limiter\n    handler.use({\n        \"createAdminHandler.use\": (req, res, next)=>{\n            if (req.method === \"GET\") {\n                console.log(`[${req.rid}] ‚è© Skip rateLimiter for GET`);\n                return next();\n            }\n            console.log(`[${req.rid}] üß≠ Applying rateLimiter for ${req.method}`);\n            return wrapRateLimiter(_lib_middleware_rateLimiter__WEBPACK_IMPORTED_MODULE_2__.rateLimiter, rateLimit)(req, res, next);\n        }\n    }[\"createAdminHandler.use\"]);\n    // Authorization guard\n    handler.use({\n        \"createAdminHandler.use\": async (req, res, next)=>{\n            console.log(`[${req.rid}] üîê Checking authorization...`);\n            try {\n                await (0,_lib_auth_authorizeAdmin__WEBPACK_IMPORTED_MODULE_1__.authorizeAdmin)()(req, res, next);\n                console.log(`[${req.rid}] ‚úÖ Authorized ADMIN`);\n            } catch (err) {\n                console.error(`[${req.rid}] üö´ Authorization failed:`, err?.message || err);\n                if (!res.headersSent) return res.status(401).json({\n                    success: false,\n                    error: \"Unauthorized\"\n                });\n            } finally{\n                // Always move on if response still open\n                if (!res.writableEnded) next();\n            }\n        }\n    }[\"createAdminHandler.use\"]);\n    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Universal Pass-through ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */ handler.use({\n        \"createAdminHandler.use\": (req, res, next)=>{\n            // ‚úÖ Fix 1: Stop chain after response already sent\n            if (res.headersSent || res.writableEnded) {\n                console.log(`‚õî [Stop chain] Response already sent ‚Üí ${req.method} ${req.url}`);\n                return;\n            }\n            console.log(`üß© [Middleware Pass] ${req.method} ${req.url}`);\n            next();\n        }\n    }[\"createAdminHandler.use\"]);\n    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Handler confirmation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */ handler.use({\n        \"createAdminHandler.use\": (req, res, next)=>{\n            // ‚úÖ Fix 2: Avoid calling next() if response closed\n            if (res.headersSent || res.writableEnded) {\n                console.log(`‚õî [Skip Handler Check] Response already ended`);\n                return;\n            }\n            console.log(`üî• [Handler Trigger Check] ‚Üí ${req.method} ${req.url}`);\n            next();\n        }\n    }[\"createAdminHandler.use\"]);\n    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Final fallback (after all handlers) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */ // üß± Export with a built-in helper that only attaches fallback *after* routes\n    // ‚úÖ Attach fallback manually after routes\n    handler.attachFallback = function() {\n        handler.use({\n            \"createAdminHandler.use\": (req, res)=>{\n                if (res.headersSent || res.writableEnded) return;\n                console.warn(`üö® [Final Fallback AFTER routes] ‚Üí ${req.method} ${req.url}`);\n                res.status(405).json({\n                    success: false,\n                    error: \"No matching handler found\"\n                });\n                return; // ‚úÖ ensure no further middleware fires\n            }\n        }[\"createAdminHandler.use\"]);\n        return handler;\n    };\n    return handler;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9taWRkbGV3YXJlL2NyZWF0ZUFkbWluSGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLHdDQUF3QztBQUNWO0FBQzZCO0FBQ0E7QUFDZjtBQUU1QyxNQUFNSSxRQUFRLENBQUNDLElBQU1BLEtBQUssT0FBT0EsTUFBTTtBQUN2QyxNQUFNQyxRQUFRLENBQUNELEdBQUdFO0lBQ2hCLE1BQU1DLElBQUlDLE9BQU9KO0lBQ2pCLE9BQU9JLE9BQU9DLFFBQVEsQ0FBQ0YsTUFBTUEsS0FBSyxJQUFJRyxLQUFLQyxLQUFLLENBQUNKLEtBQUtEO0FBQ3hEO0FBRUEseUNBQXlDO0FBQ3pDLFNBQVNNLGdCQUFnQkMsYUFBYSxFQUFFQyxJQUFJO0lBQzFDLE9BQU8sT0FBT0MsS0FBS0MsS0FBS0M7UUFDdEIsSUFBSTtZQUNGLElBQUlDLFNBQVM7WUFDYixNQUFNLElBQUlDLFFBQVEsQ0FBQ0M7Z0JBQ2pCUCxjQUFjRSxLQUFLQyxLQUFLO29CQUN0QkUsU0FBUztvQkFDVEU7Z0JBQ0YsR0FBR047WUFDTDtZQUNBLElBQUksQ0FBQ0UsSUFBSUssV0FBVyxJQUFJSCxRQUFRLE9BQU9EO1lBQ3ZDLElBQUksQ0FBQ0QsSUFBSUssV0FBVyxFQUFFSjtRQUN4QixFQUFFLE9BQU9LLEdBQUc7WUFDVkMsUUFBUUMsS0FBSyxDQUFDLDJCQUEyQkY7WUFDekMsSUFBSSxDQUFDTixJQUFJSyxXQUFXLEVBQ2xCTCxJQUFJUyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFRixPQUFPO1lBQStCO1FBQ2pFO0lBQ0Y7QUFDRjtBQUVPLFNBQVNHLG1CQUFtQkMsVUFBVSxDQUFDLENBQUM7SUFDN0MsTUFBTUMsUUFBUTFCLE1BQU15QixRQUFRRSxTQUFTLElBQUlGLFFBQVFFLFNBQVMsR0FBRyxDQUFDO0lBQzlELE1BQU1BLFlBQVk7UUFDaEJDLE9BQU8xQixNQUFNd0IsTUFBTUUsS0FBSyxFQUFFO1FBQzFCQyxRQUFRM0IsTUFBTXdCLE1B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QyxLQUFLQztZQUNyQixtREFBbUQ7WUFDbkQsSUFBSUQsSUFBSUssV0FBVyxJQUFJTCxJQUFJb0MsYUFBYSxFQUFFO2dCQUN4QzdCLFFBQVF3QixHQUFHLENBQUMsQ0FBQyw2Q0FBNkMsQ0FBQztnQkFDM0Q7WUFDRjtZQUNBeEIsUUFBUXdCLEdBQUcsQ0FBQyxDQUFDLDZCQUE2QixFQUFFaEMsSUFBSXNCLE1BQU0sQ0FBQyxDQUFDLEVBQUV0QixJQUFJdUIsR0FBRyxFQUFFO1lBQ25FckI7UUFDRjs7SUFFQSx5RUFBeUUsR0FDekUsOEVBQThFO0lBQzlFLDBDQUEwQztJQUMxQzBCLFFBQVFVLGNBQWMsR0FBRztRQUN2QlYsUUFBUUMsR0FBRztzQ0FBQyxDQUFDN0IsS0FBS0M7Z0JBQ2hCLElBQUlBLElBQUlLLFdBQVcsSUFBSUwsSUFBSW9DLGFBQWEsRUFBRTtnQkFDMUM3QixRQUFRbUIsSUFBSSxDQUFDLENBQUMsbUNBQW1DLEVBQUUzQixJQUFJc0IsTUFBTSxDQUFDLENBQUMsRUFBRXRCLElBQUl1QixHQUFHLEVBQUU7Z0JBQzFFdEIsSUFBSVMsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFDbkJhLFNBQVM7b0JBQ1RmLE9BQU87Z0JBQ1Q7Z0JBQ0EsUUFBUSx1Q0FBdUM7WUFDakQ7O1FBQ0EsT0FBT21CO0lBQ1Q7SUFHQSxPQUFPQTtBQUNUIiwic291cmNlcyI6WyIvVXNlcnMvZW1vbnRhemVyaS9Eb2N1bWVudHMvcHJvamVjdHMvc2hlbGwtc3Rvcmllcy1zdHVkaW8vbGliL21pZGRsZXdhcmUvY3JlYXRlQWRtaW5IYW5kbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIC9saWIvbWlkZGxld2FyZS9jcmVhdGVBZG1pbkhhbmRsZXIuanNcbmltcG9ydCBuYyBmcm9tIFwibmV4dC1jb25uZWN0XCI7XG5pbXBvcnQgeyBhdXRob3JpemVBZG1pbiB9IGZyb20gXCJAL2xpYi9hdXRoL2F1dGhvcml6ZUFkbWluXCI7XG5pbXBvcnQgeyByYXRlTGltaXRlciB9IGZyb20gXCJAL2xpYi9taWRkbGV3YXJlL3JhdGVMaW1pdGVyXCI7XG5pbXBvcnQgeyB3aXRoUmVxdWVzdElkIH0gZnJvbSBcIi4vcmVxdWVzdElkXCI7XG5cbmNvbnN0IGlzT2JqID0gKHYpID0+IHYgJiYgdHlwZW9mIHYgPT09IFwib2JqZWN0XCI7XG5jb25zdCB0b0ludCA9ICh2LCBkKSA9PiB7XG4gIGNvbnN0IG4gPSBOdW1iZXIodik7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobikgJiYgbiA+PSAwID8gTWF0aC50cnVuYyhuKSA6IGQ7XG59O1xuXG4vLyBHcmFjZWZ1bCBhc3luYyB3cmFwcGVyIGZvciByYXRlTGltaXRlclxuZnVuY3Rpb24gd3JhcFJhdGVMaW1pdGVyKHJhdGVMaW1pdGVyRm4sIG9wdHMpIHtcbiAgcmV0dXJuIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcGFzc2VkID0gZmFsc2U7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICByYXRlTGltaXRlckZuKHJlcSwgcmVzLCAoKSA9PiB7XG4gICAgICAgICAgcGFzc2VkID0gdHJ1ZTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIG9wdHMpO1xuICAgICAgfSk7XG4gICAgICBpZiAoIXJlcy5oZWFkZXJzU2VudCAmJiBwYXNzZWQpIHJldHVybiBuZXh0KCk7XG4gICAgICBpZiAoIXJlcy5oZWFkZXJzU2VudCkgbmV4dCgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbcmF0ZUxpbWl0ZXJdIPCfkqUgRXJyb3I6XCIsIGUpO1xuICAgICAgaWYgKCFyZXMuaGVhZGVyc1NlbnQpXG4gICAgICAgIHJlcy5zdGF0dXMoNDI5KS5qc29uKHsgZXJyb3I6IFwiUmF0ZSBsaW1pdCBleGNlZWRlZCBvciBlcnJvclwiIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFkbWluSGFuZGxlcihvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcmF3UkwgPSBpc09iaihvcHRpb25zLnJhdGVMaW1pdCkgPyBvcHRpb25zLnJhdGVMaW1pdCA6IHt9O1xuICBjb25zdCByYXRlTGltaXQgPSB7XG4gICAgbGltaXQ6IHRvSW50KHJhd1JMLmxpbWl0LCA2MCksXG4gICAgd2luZG93OiB0b0ludChyYXdSTC53aW5kb3csIDYwKSxcbiAgfTtcblxuICAvKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgRXJyb3IgSGFuZGxpbmcg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXG4gIGNvbnN0IG9uRXJyb3IgPVxuICAgIG9wdGlvbnMub25FcnJvciB8fFxuICAgICgoZXJyLCByZXEsIHJlcykgPT4ge1xuICAgICAgY29uc3Qgc3RhdHVzID0gTnVtYmVyKGVycj8uc3RhdHVzQ29kZSA/PyBlcnI/LnN0YXR1cyA/PyA1MDApIHx8IDUwMDtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICB0eXBlb2YgZXJyPy5tZXNzYWdlID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgPyBlcnIubWVzc2FnZVxuICAgICAgICAgIDogXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBbQWRtaW4gQVBJIEVycm9yXSAoJHtyZXEubWV0aG9kfSAke3JlcS51cmx9KTpgLCBtZXNzYWdlKTtcbiAgICAgIGlmICghcmVzLmhlYWRlcnNTZW50KVxuICAgICAgICByZXMuc3RhdHVzKHN0YXR1cykuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogbWVzc2FnZSwgY29kZTogc3RhdHVzIH0pO1xuICAgIH0pO1xuXG4gIC8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBGYWxsYmFjayBmb3IgdW5tYXRjaGVkIG1ldGhvZHMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXG4gIGNvbnN0IG9uTm9NYXRjaCA9XG4gICAgb3B0aW9ucy5vbk5vTWF0Y2ggfHxcbiAgICAoKHJlcSwgcmVzKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBbTk8gTUFUQ0hdICR7cmVxLm1ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgcmVzXG4gICAgICAgIC5zdGF0dXMoNDA1KVxuICAgICAgICAuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYE1ldGhvZCAke3JlcS5tZXRob2R9IG5vdCBhbGxvd2VkYCB9KTtcbiAgICB9KTtcblxuICBjb25zdCBoYW5kbGVyID0gbmMoeyBvbkVycm9yLCBvbk5vTWF0Y2ggfSk7XG5cbiAgLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIEFkZCBtaWRkbGV3YXJlcyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbiAgaGFuZGxlci51c2Uod2l0aFJlcXVlc3RJZCk7XG5cbiAgLy8gRGV2ZWxvcG1lbnQgcmVxdWVzdCBsb2dnZXJcbiAgaGFuZGxlci51c2UoKHJlcSwgX3JlcywgbmV4dCkgPT4ge1xuICAgIGlmICghcmVxLnVybD8uc3RhcnRzV2l0aChcIi9fbmV4dFwiKSkge1xuICAgICAgY29uc29sZS5sb2coYFxcbvCflKUgW1JlcXVlc3QgU3RhcnRdIFske3JlcS5yaWR9XSAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICB9XG4gICAgbmV4dCgpO1xuICB9KTtcblxuICAvLyBPUFRJT05TIHByZWZsaWdodFxuICBoYW5kbGVyLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gXCJPUFRJT05TXCIpIHtcbiAgICAgIHJlcy5zZXRIZWFkZXIoXCJBbGxvd1wiLCBcIkdFVCxQT1NULFBVVCxQQVRDSCxERUxFVEUsT1BUSU9OU1wiKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHtyZXEucmlkfV0g8J+ViiBPUFRJT05TIHByZWZsaWdodCDihpIgMjA0YCk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDQpLmVuZCgpO1xuICAgIH1cbiAgICBuZXh0KCk7XG4gIH0pO1xuXG4gIC8vIFNlY3VyaXR5IGhlYWRlcnNcbiAgaGFuZGxlci51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLnNldEhlYWRlcihcIkNhY2hlLUNvbnRyb2xcIiwgXCJuby1zdG9yZVwiKTtcbiAgICByZXMuc2V0SGVhZGVyKFwiVmFyeVwiLCBcIlgtUmVxdWVzdGVkLVdpdGhcIik7XG4gICAgaWYgKCFyZXMuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKSB7XG4gICAgICByZXMuc2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiKTtcbiAgICB9XG4gICAgbmV4dCgpO1xuICB9KTtcblxuICAvLyBSYXRlIGxpbWl0ZXJcbiAgaGFuZGxlci51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKHJlcS5tZXRob2QgPT09IFwiR0VUXCIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHtyZXEucmlkfV0g4o+pIFNraXAgcmF0ZUxpbWl0ZXIgZm9yIEdFVGApO1xuICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coYFske3JlcS5yaWR9XSDwn6etIEFwcGx5aW5nIHJhdGVMaW1pdGVyIGZvciAke3JlcS5tZXRob2R9YCk7XG4gICAgcmV0dXJuIHdyYXBSYXRlTGltaXRlcihyYXRlTGltaXRlciwgcmF0ZUxpbWl0KShyZXEsIHJlcywgbmV4dCk7XG4gIH0pO1xuXG4gIC8vIEF1dGhvcml6YXRpb24gZ3VhcmRcbiAgaGFuZGxlci51c2UoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc29sZS5sb2coYFske3JlcS5yaWR9XSDwn5SQIENoZWNraW5nIGF1dGhvcml6YXRpb24uLi5gKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYXV0aG9yaXplQWRtaW4oKShyZXEsIHJlcywgbmV4dCk7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7cmVxLnJpZH1dIOKchSBBdXRob3JpemVkIEFETUlOYCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbJHtyZXEucmlkfV0g8J+aqyBBdXRob3JpemF0aW9uIGZhaWxlZDpgLCBlcnI/Lm1lc3NhZ2UgfHwgZXJyKTtcbiAgICAgIGlmICghcmVzLmhlYWRlcnNTZW50KVxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIEFsd2F5cyBtb3ZlIG9uIGlmIHJlc3BvbnNlIHN0aWxsIG9wZW5cbiAgICAgIGlmICghcmVzLndyaXRhYmxlRW5kZWQpIG5leHQoKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBVbml2ZXJzYWwgUGFzcy10aHJvdWdoIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuICBoYW5kbGVyLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAvLyDinIUgRml4IDE6IFN0b3AgY2hhaW4gYWZ0ZXIgcmVzcG9uc2UgYWxyZWFkeSBzZW50XG4gICAgaWYgKHJlcy5oZWFkZXJzU2VudCB8fCByZXMud3JpdGFibGVFbmRlZCkge1xuICAgICAgY29uc29sZS5sb2coYOKblCBbU3RvcCBjaGFpbl0gUmVzcG9uc2UgYWxyZWFkeSBzZW50IOKGkiAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coYPCfp6kgW01pZGRsZXdhcmUgUGFzc10gJHtyZXEubWV0aG9kfSAke3JlcS51cmx9YCk7XG4gICAgbmV4dCgpO1xuICB9KTtcblxuICAvKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgSGFuZGxlciBjb25maXJtYXRpb24g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXG4gIGhhbmRsZXIudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIC8vIOKchSBGaXggMjogQXZvaWQgY2FsbGluZyBuZXh0KCkgaWYgcmVzcG9uc2UgY2xvc2VkXG4gICAgaWYgKHJlcy5oZWFkZXJzU2VudCB8fCByZXMud3JpdGFibGVFbmRlZCkge1xuICAgICAgY29uc29sZS5sb2coYOKblCBbU2tpcCBIYW5kbGVyIENoZWNrXSBSZXNwb25zZSBhbHJlYWR5IGVuZGVkYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGDwn5SlIFtIYW5kbGVyIFRyaWdnZXIgQ2hlY2tdIOKGkiAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICBuZXh0KCk7XG4gIH0pO1xuXG4gIC8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBGaW5hbCBmYWxsYmFjayAoYWZ0ZXIgYWxsIGhhbmRsZXJzKSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbiAgLy8g8J+nsSBFeHBvcnQgd2l0aCBhIGJ1aWx0LWluIGhlbHBlciB0aGF0IG9ubHkgYXR0YWNoZXMgZmFsbGJhY2sgKmFmdGVyKiByb3V0ZXNcbiAgLy8g4pyFIEF0dGFjaCBmYWxsYmFjayBtYW51YWxseSBhZnRlciByb3V0ZXNcbiAgaGFuZGxlci5hdHRhY2hGYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICBoYW5kbGVyLnVzZSgocmVxLCByZXMpID0+IHtcbiAgICAgIGlmIChyZXMuaGVhZGVyc1NlbnQgfHwgcmVzLndyaXRhYmxlRW5kZWQpIHJldHVybjtcbiAgICAgIGNvbnNvbGUud2Fybihg8J+aqCBbRmluYWwgRmFsbGJhY2sgQUZURVIgcm91dGVzXSDihpIgJHtyZXEubWV0aG9kfSAke3JlcS51cmx9YCk7XG4gICAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogXCJObyBtYXRjaGluZyBoYW5kbGVyIGZvdW5kXCIsXG4gICAgICB9KTtcbiAgICAgIHJldHVybjsgLy8g4pyFIGVuc3VyZSBubyBmdXJ0aGVyIG1pZGRsZXdhcmUgZmlyZXNcbiAgICB9KTtcbiAgICByZXR1cm4gaGFuZGxlcjtcbiAgfTtcblxuXG4gIHJldHVybiBoYW5kbGVyO1xufVxuXG5cblxuXG5cbiJdLCJuYW1lcyI6WyJuYyIsImF1dGhvcml6ZUFkbWluIiwicmF0ZUxpbWl0ZXIiLCJ3aXRoUmVxdWVzdElkIiwiaXNPYmoiLCJ2IiwidG9JbnQiLCJkIiwibiIsIk51bWJlciIsImlzRmluaXRlIiwiTWF0aCIsInRydW5jIiwid3JhcFJhdGVMaW1pdGVyIiwicmF0ZUxpbWl0ZXJGbiIsIm9wdHMiLCJyZXEiLCJyZXMiLCJuZXh0IiwicGFzc2VkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJoZWFkZXJzU2VudCIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGF0dXMiLCJqc29uIiwiY3JlYXRlQWRtaW5IYW5kbGVyIiwib3B0aW9ucyIsInJhd1JMIiwicmF0ZUxpbWl0IiwibGltaXQiLCJ3aW5kb3ciLCJvbkVycm9yIiwiZXJyIiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJtZXRob2QiLCJ1cmwiLCJzdWNjZXNzIiwiY29kZSIsIm9uTm9NYXRjaCIsIndhcm4iLCJoYW5kbGVyIiwidXNlIiwiX3JlcyIsInN0YXJ0c1dpdGgiLCJsb2ciLCJyaWQiLCJzZXRIZWFkZXIiLCJlbmQiLCJnZXRIZWFkZXIiLCJ3cml0YWJsZUVuZGVkIiwiYXR0YWNoRmFsbGJhY2siXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/middleware/createAdminHandler.js\n");

/***/ }),

/***/ "(api-node)/./lib/middleware/rateLimiter.js":
/*!***************************************!*\
  !*** ./lib/middleware/rateLimiter.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rateLimiter: () => (/* binding */ rateLimiter)\n/* harmony export */ });\n/* harmony import */ var _lib_redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/redis */ \"(api-node)/./lib/redis.js\");\n// lib/middleware/rateLimiter.js\n\nasync function rateLimiter(req, res, next, options = {}) {\n    try {\n        const redis = await (0,_lib_redis__WEBPACK_IMPORTED_MODULE_0__.getRedisClient)();\n        const ip = req.headers['x-forwarded-for'] || req.socket.remoteAddress || 'unknown';\n        const key = `rate-limit:${ip}`;\n        const limit = options.limit || 60;\n        const windowSeconds = options.window || 60;\n        const count = await redis.incr(key);\n        if (count === 1) await redis.expire(key, windowSeconds);\n        if (count > limit) {\n            return res.status(429).json({\n                error: 'Too many requests. Please try again later.'\n            });\n        }\n        res.setHeader('X-RateLimit-Limit', limit);\n        res.setHeader('X-RateLimit-Remaining', Math.max(0, limit - count));\n        res.setHeader('X-RateLimit-Reset', windowSeconds);\n        return next();\n    } catch (err) {\n        console.error('‚ö†Ô∏è Rate limiter failed, allowing request to proceed:', err);\n        return next(); // ‚úÖ Allow request even if Redis fails\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9taWRkbGV3YXJlL3JhdGVMaW1pdGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsZ0NBQWdDO0FBRWE7QUFFdEMsZUFBZUMsWUFBWUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsVUFBVSxDQUFDLENBQUM7SUFDMUQsSUFBSTtRQUNGLE1BQU1DLFFBQVEsTUFBTU4sMERBQWNBO1FBRWxDLE1BQU1PLEtBQUtMLElBQUlNLE9BQU8sQ0FBQyxrQkFBa0IsSUFBSU4sSUFBSU8sTUFBTSxDQUFDQyxhQUFhLElBQUk7UUFDekUsTUFBTUMsTUFBTSxDQUFDLFdBQVcsRUFBRUosSUFBSTtRQUU5QixNQUFNSyxRQUFRUCxRQUFRTyxLQUFLLElBQUk7UUFDL0IsTUFBTUMsZ0JBQWdCUixRQUFRUyxNQUFNLElBQUk7UUFFeEMsTUFBTUMsUUFBUSxNQUFNVCxNQUFNVSxJQUFJLENBQUNMO1FBRS9CLElBQUlJLFVBQVUsR0FBRyxNQUFNVCxNQUFNVyxNQUFNLENBQUNOLEtBQUtFO1FBQ3pDLElBQUlFLFFBQVFILE9BQU87WUFDakIsT0FBT1QsSUFBSWUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUE2QztRQUNwRjtRQUVBakIsSUFBSWtCLFNBQVMsQ0FBQyxxQkFBcUJUO1FBQ25DVCxJQUFJa0IsU0FBUyxDQUFDLHlCQUF5QkMsS0FBS0MsR0FBRyxDQUFDLEdBQUdYLFFBQVFHO1FBQzNEWixJQUFJa0IsU0FBUyxDQUFDLHFCQUFxQlI7UUFFbkMsT0FBT1Q7SUFDVCxFQUFFLE9BQU9vQixLQUFLO1FBQ1pDLFFBQVFMLEtBQUssQ0FBQyx3REFBd0RJO1FBQ3RFLE9BQU9wQixRQUFRLHNDQUFzQztJQUN2RDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZW1vbnRhemVyaS9Eb2N1bWVudHMvcHJvamVjdHMvc2hlbGwtc3Rvcmllcy1zdHVkaW8vbGliL21pZGRsZXdhcmUvcmF0ZUxpbWl0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL21pZGRsZXdhcmUvcmF0ZUxpbWl0ZXIuanNcblxuaW1wb3J0IHsgZ2V0UmVkaXNDbGllbnQgfSBmcm9tICdAL2xpYi9yZWRpcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByYXRlTGltaXRlcihyZXEsIHJlcywgbmV4dCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlZGlzID0gYXdhaXQgZ2V0UmVkaXNDbGllbnQoKTtcbiAgXG4gICAgICBjb25zdCBpcCA9IHJlcS5oZWFkZXJzWyd4LWZvcndhcmRlZC1mb3InXSB8fCByZXEuc29ja2V0LnJlbW90ZUFkZHJlc3MgfHwgJ3Vua25vd24nO1xuICAgICAgY29uc3Qga2V5ID0gYHJhdGUtbGltaXQ6JHtpcH1gO1xuICAgICAgXG4gICAgICBjb25zdCBsaW1pdCA9IG9wdGlvbnMubGltaXQgfHwgNjA7XG4gICAgICBjb25zdCB3aW5kb3dTZWNvbmRzID0gb3B0aW9ucy53aW5kb3cgfHwgNjA7XG4gIFxuICAgICAgY29uc3QgY291bnQgPSBhd2FpdCByZWRpcy5pbmNyKGtleSk7XG4gIFxuICAgICAgaWYgKGNvdW50ID09PSAxKSBhd2FpdCByZWRpcy5leHBpcmUoa2V5LCB3aW5kb3dTZWNvbmRzKTtcbiAgICAgIGlmIChjb3VudCA+IGxpbWl0KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQyOSkuanNvbih7IGVycm9yOiAnVG9vIG1hbnkgcmVxdWVzdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyB9KTtcbiAgICAgIH1cbiAgXG4gICAgICByZXMuc2V0SGVhZGVyKCdYLVJhdGVMaW1pdC1MaW1pdCcsIGxpbWl0KTtcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ1gtUmF0ZUxpbWl0LVJlbWFpbmluZycsIE1hdGgubWF4KDAsIGxpbWl0IC0gY291bnQpKTtcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ1gtUmF0ZUxpbWl0LVJlc2V0Jywgd2luZG93U2Vjb25kcyk7XG4gIFxuICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KaoO+4jyBSYXRlIGxpbWl0ZXIgZmFpbGVkLCBhbGxvd2luZyByZXF1ZXN0IHRvIHByb2NlZWQ6JywgZXJyKTtcbiAgICAgIHJldHVybiBuZXh0KCk7IC8vIOKchSBBbGxvdyByZXF1ZXN0IGV2ZW4gaWYgUmVkaXMgZmFpbHNcbiAgICB9XG4gIH1cbiAgIl0sIm5hbWVzIjpbImdldFJlZGlzQ2xpZW50IiwicmF0ZUxpbWl0ZXIiLCJyZXEiLCJyZXMiLCJuZXh0Iiwib3B0aW9ucyIsInJlZGlzIiwiaXAiLCJoZWFkZXJzIiwic29ja2V0IiwicmVtb3RlQWRkcmVzcyIsImtleSIsImxpbWl0Iiwid2luZG93U2Vjb25kcyIsIndpbmRvdyIsImNvdW50IiwiaW5jciIsImV4cGlyZSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInNldEhlYWRlciIsIk1hdGgiLCJtYXgiLCJlcnIiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/middleware/rateLimiter.js\n");

/***/ }),

/***/ "(api-node)/./lib/middleware/requestId.js":
/*!*************************************!*\
  !*** ./lib/middleware/requestId.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withRequestId: () => (/* binding */ withRequestId)\n/* harmony export */ });\n// lib/middleware/requestId.js\nfunction withRequestId(req, res, next) {\n    // Node 18+: crypto.randomUUID(); fallback if unavailable\n    const rid = typeof crypto?.randomUUID === 'function' ? crypto.randomUUID() : `${Date.now().toString(36)}-${Math.random().toString(16).slice(2, 10)}`;\n    req.rid = rid;\n    res.setHeader('X-Request-Id', rid);\n    next();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9taWRkbGV3YXJlL3JlcXVlc3RJZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsOEJBQThCO0FBQ3ZCLFNBQVNBLGNBQWNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJO0lBQ3hDLHlEQUF5RDtJQUN6RCxNQUFNQyxNQUFNLE9BQVFDLFFBQVFDLGVBQWUsYUFDdkNELE9BQU9DLFVBQVUsS0FDakIsR0FBR0MsS0FBS0MsR0FBRyxHQUFHQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUVDLEtBQUtDLE1BQU0sR0FBR0YsUUFBUSxDQUFDLElBQUlHLEtBQUssQ0FBQyxHQUFHLEtBQUs7SUFFM0VYLElBQUlHLEdBQUcsR0FBR0E7SUFDVkYsSUFBSVcsU0FBUyxDQUFDLGdCQUFnQlQ7SUFDOUJEO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9lbW9udGF6ZXJpL0RvY3VtZW50cy9wcm9qZWN0cy9zaGVsbC1zdG9yaWVzLXN0dWRpby9saWIvbWlkZGxld2FyZS9yZXF1ZXN0SWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL21pZGRsZXdhcmUvcmVxdWVzdElkLmpzXG5leHBvcnQgZnVuY3Rpb24gd2l0aFJlcXVlc3RJZChyZXEsIHJlcywgbmV4dCkge1xuICAgIC8vIE5vZGUgMTgrOiBjcnlwdG8ucmFuZG9tVVVJRCgpOyBmYWxsYmFjayBpZiB1bmF2YWlsYWJsZVxuICAgIGNvbnN0IHJpZCA9ICh0eXBlb2YgY3J5cHRvPy5yYW5kb21VVUlEID09PSAnZnVuY3Rpb24nKVxuICAgICAgPyBjcnlwdG8ucmFuZG9tVVVJRCgpXG4gICAgICA6IGAke0RhdGUubm93KCkudG9TdHJpbmcoMzYpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIsIDEwKX1gO1xuICBcbiAgICByZXEucmlkID0gcmlkO1xuICAgIHJlcy5zZXRIZWFkZXIoJ1gtUmVxdWVzdC1JZCcsIHJpZCk7XG4gICAgbmV4dCgpO1xuICB9XG4gICJdLCJuYW1lcyI6WyJ3aXRoUmVxdWVzdElkIiwicmVxIiwicmVzIiwibmV4dCIsInJpZCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJNYXRoIiwicmFuZG9tIiwic2xpY2UiLCJzZXRIZWFkZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/middleware/requestId.js\n");

/***/ }),

/***/ "(api-node)/./lib/redis.js":
/*!**********************!*\
  !*** ./lib/redis.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRedisClient: () => (/* binding */ getRedisClient),\n/* harmony export */   redisPromise: () => (/* binding */ redisPromise)\n/* harmony export */ });\n// /lib/redis.js\nlet client = null;\n/** Normalize options like { EX: 60 } -> { ex: 60 } */ function normalizeSetOpts(opts = {}) {\n    if (!opts) return undefined;\n    const ex = opts.ex ?? opts.EX ?? undefined;\n    const px = opts.px ?? opts.PX ?? undefined;\n    const out = {};\n    if (ex != null) out.ex = ex;\n    if (px != null) out.px = px;\n    return Object.keys(out).length ? out : undefined;\n}\n// Wrap Upstash client to match a minimal common API\nfunction wrapUpstash(upstash) {\n    return {\n        get: (k)=>upstash.get(k),\n        set: (k, v, opts)=>upstash.set(k, v, normalizeSetOpts(opts)),\n        del: (k)=>upstash.del(k),\n        incr: (k)=>upstash.incr(k),\n        expire: (k, s)=>upstash.expire(k, s)\n    };\n}\n// Wrap node-redis (TCP) to match the same API\nfunction wrapTcp(nodeClient) {\n    return {\n        get: (k)=>nodeClient.get(k),\n        set: (k, v, opts)=>nodeClient.set(k, v, normalizeSetOpts(opts)),\n        del: (k)=>nodeClient.del(k),\n        incr: (k)=>nodeClient.incr(k),\n        expire: (k, s)=>nodeClient.expire(k, s)\n    };\n}\nasync function getRedisClient() {\n    if (client) return client;\n    // Prefer Upstash REST if present\n    if (process.env.UPSTASH_REDIS_REST_URL && process.env.UPSTASH_REDIS_REST_TOKEN) {\n        const { Redis } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @upstash/redis */ \"@upstash/redis\"));\n        const upstash = new Redis({\n            url: process.env.UPSTASH_REDIS_REST_URL,\n            token: process.env.UPSTASH_REDIS_REST_TOKEN\n        });\n        client = wrapUpstash(upstash);\n        return client;\n    }\n    // Fallback to TCP Redis via node-redis (requires REDIS_URL)\n    const { createClient } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! redis */ \"redis\", 23));\n    const raw = createClient({\n        url: process.env.REDIS_URL || 'redis://localhost:6379',\n        socket: {\n            reconnectStrategy: (retries)=>retries > 5 ? new Error('Max reconnect attempts reached') : 1000\n        }\n    });\n    raw.on('error', (err)=>console.error('‚ùå Redis Error:', err));\n    try {\n        await raw.connect();\n        console.log('‚úÖ Connected to Redis (TCP)');\n    } catch (err) {\n        console.warn('‚ö†Ô∏è Redis connection failed:', err.message);\n    }\n    client = wrapTcp(raw);\n    return client;\n}\n// Export a promise you can await where needed (no top-level await)\nconst redisPromise = getRedisClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxlQUFldkIsaUJBQWlCIiwic291cmNlcyI6WyIvVXNlcnMvZW1vbnRhemVyaS9Eb2N1bWVudHMvcHJvamVjdHMvc2hlbGwtc3Rvcmllcy1zdHVkaW8vbGliL3JlZGlzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIC9saWIvcmVkaXMuanNcblxubGV0IGNsaWVudCA9IG51bGw7XG5cbi8qKiBOb3JtYWxpemUgb3B0aW9ucyBsaWtlIHsgRVg6IDYwIH0gLT4geyBleDogNjAgfSAqL1xuZnVuY3Rpb24gbm9ybWFsaXplU2V0T3B0cyhvcHRzID0ge30pIHtcbiAgaWYgKCFvcHRzKSByZXR1cm4gdW5kZWZpbmVkO1xuICBjb25zdCBleCA9IG9wdHMuZXggPz8gb3B0cy5FWCA/PyB1bmRlZmluZWQ7XG4gIGNvbnN0IHB4ID0gb3B0cy5weCA/PyBvcHRzLlBYID8/IHVuZGVmaW5lZDtcbiAgY29uc3Qgb3V0ID0ge307XG4gIGlmIChleCAhPSBudWxsKSBvdXQuZXggPSBleDtcbiAgaWYgKHB4ICE9IG51bGwpIG91dC5weCA9IHB4O1xuICByZXR1cm4gT2JqZWN0LmtleXMob3V0KS5sZW5ndGggPyBvdXQgOiB1bmRlZmluZWQ7XG59XG5cbi8vIFdyYXAgVXBzdGFzaCBjbGllbnQgdG8gbWF0Y2ggYSBtaW5pbWFsIGNvbW1vbiBBUElcbmZ1bmN0aW9uIHdyYXBVcHN0YXNoKHVwc3Rhc2gpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXQ6IChrKSA9PiB1cHN0YXNoLmdldChrKSxcbiAgICBzZXQ6IChrLCB2LCBvcHRzKSA9PiB1cHN0YXNoLnNldChrLCB2LCBub3JtYWxpemVTZXRPcHRzKG9wdHMpKSxcbiAgICBkZWw6IChrKSA9PiB1cHN0YXNoLmRlbChrKSxcbiAgICBpbmNyOiAoaykgPT4gdXBzdGFzaC5pbmNyKGspLFxuICAgIGV4cGlyZTogKGssIHMpID0+IHVwc3Rhc2guZXhwaXJlKGssIHMpLFxuICB9O1xufVxuXG4vLyBXcmFwIG5vZGUtcmVkaXMgKFRDUCkgdG8gbWF0Y2ggdGhlIHNhbWUgQVBJXG5mdW5jdGlvbiB3cmFwVGNwKG5vZGVDbGllbnQpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXQ6IChrKSA9PiBub2RlQ2xpZW50LmdldChrKSxcbiAgICBzZXQ6IChrLCB2LCBvcHRzKSA9PiBub2RlQ2xpZW50LnNldChrLCB2LCBub3JtYWxpemVTZXRPcHRzKG9wdHMpKSxcbiAgICBkZWw6IChrKSA9PiBub2RlQ2xpZW50LmRlbChrKSxcbiAgICBpbmNyOiAoaykgPT4gbm9kZUNsaWVudC5pbmNyKGspLFxuICAgIGV4cGlyZTogKGssIHMpID0+IG5vZGVDbGllbnQuZXhwaXJlKGssIHMpLFxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXNDbGllbnQoKSB7XG4gIGlmIChjbGllbnQpIHJldHVybiBjbGllbnQ7XG5cbiAgLy8gUHJlZmVyIFVwc3Rhc2ggUkVTVCBpZiBwcmVzZW50XG4gIGlmIChwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVVJMICYmIHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9UT0tFTikge1xuICAgIGNvbnN0IHsgUmVkaXMgfSA9IGF3YWl0IGltcG9ydCgnQHVwc3Rhc2gvcmVkaXMnKTtcbiAgICBjb25zdCB1cHN0YXNoID0gbmV3IFJlZGlzKHtcbiAgICAgIHVybDogcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1VSTCxcbiAgICAgIHRva2VuOiBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4sXG4gICAgfSk7XG4gICAgY2xpZW50ID0gd3JhcFVwc3Rhc2godXBzdGFzaCk7XG4gICAgcmV0dXJuIGNsaWVudDtcbiAgfVxuXG4gIC8vIEZhbGxiYWNrIHRvIFRDUCBSZWRpcyB2aWEgbm9kZS1yZWRpcyAocmVxdWlyZXMgUkVESVNfVVJMKVxuICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCdyZWRpcycpO1xuXG4gIGNvbnN0IHJhdyA9IGNyZWF0ZUNsaWVudCh7XG4gICAgdXJsOiBwcm9jZXNzLmVudi5SRURJU19VUkwgfHwgJ3JlZGlzOi8vbG9jYWxob3N0OjYzNzknLFxuICAgIHNvY2tldDoge1xuICAgICAgcmVjb25uZWN0U3RyYXRlZ3k6IChyZXRyaWVzKSA9PiAocmV0cmllcyA+IDUgPyBuZXcgRXJyb3IoJ01heCByZWNvbm5lY3QgYXR0ZW1wdHMgcmVhY2hlZCcpIDogMTAwMCksXG4gICAgfSxcbiAgfSk7XG5cbiAgcmF3Lm9uKCdlcnJvcicsIChlcnIpID0+IGNvbnNvbGUuZXJyb3IoJ+KdjCBSZWRpcyBFcnJvcjonLCBlcnIpKTtcblxuICB0cnkge1xuICAgIGF3YWl0IHJhdy5jb25uZWN0KCk7XG4gICAgY29uc29sZS5sb2coJ+KchSBDb25uZWN0ZWQgdG8gUmVkaXMgKFRDUCknKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS53YXJuKCfimqDvuI8gUmVkaXMgY29ubmVjdGlvbiBmYWlsZWQ6JywgZXJyLm1lc3NhZ2UpO1xuICB9XG5cbiAgY2xpZW50ID0gd3JhcFRjcChyYXcpO1xuICByZXR1cm4gY2xpZW50O1xufVxuXG4vLyBFeHBvcnQgYSBwcm9taXNlIHlvdSBjYW4gYXdhaXQgd2hlcmUgbmVlZGVkIChubyB0b3AtbGV2ZWwgYXdhaXQpXG5leHBvcnQgY29uc3QgcmVkaXNQcm9taXNlID0gZ2V0UmVkaXNDbGllbnQoKTtcblxuXG5cblxuIl0sIm5hbWVzIjpbImNsaWVudCIsIm5vcm1hbGl6ZVNldE9wdHMiLCJvcHRzIiwidW5kZWZpbmVkIiwiZXgiLCJFWCIsInB4IiwiUFgiLCJvdXQiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwid3JhcFVwc3Rhc2giLCJ1cHN0YXNoIiwiZ2V0IiwiayIsInNldCIsInYiLCJkZWwiLCJpbmNyIiwiZXhwaXJlIiwicyIsIndyYXBUY3AiLCJub2RlQ2xpZW50IiwiZ2V0UmVkaXNDbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiVVBTVEFTSF9SRURJU19SRVNUX1VSTCIsIlVQU1RBU0hfUkVESVNfUkVTVF9UT0tFTiIsIlJlZGlzIiwidXJsIiwidG9rZW4iLCJjcmVhdGVDbGllbnQiLCJyYXciLCJSRURJU19VUkwiLCJzb2NrZXQiLCJyZWNvbm5lY3RTdHJhdGVneSIsInJldHJpZXMiLCJFcnJvciIsIm9uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiY29ubmVjdCIsImxvZyIsIndhcm4iLCJtZXNzYWdlIiwicmVkaXNQcm9taXNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/redis.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmanage_products&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fmanage_products%2Findex.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmanage_products&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fmanage_products%2Findex.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_manage_products_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages/api/admin/manage_products/index.js */ \"(api-node)/./pages/api/admin/manage_products/index.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_admin_manage_products_index_js__WEBPACK_IMPORTED_MODULE_4__]);\n_pages_api_admin_manage_products_index_js__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_admin_manage_products_index_js__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_admin_manage_products_index_js__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/manage_products\",\n        pathname: \"/api/admin/manage_products\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_admin_manage_products_index_js__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/admin/manage_products\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/admin/manage_products\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGYWRtaW4lMkZtYW5hZ2VfcHJvZHVjdHMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmFkbWluJTJGbWFuYWdlX3Byb2R1Y3RzJTJGaW5kZXguanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQ0M7QUFDdUM7QUFDckM7QUFDMUQ7QUFDdUU7QUFDQztBQUNGO0FBQ3RFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxzRUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsc0VBQVE7QUFDcEM7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0QsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUI7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0RBQXdEO0FBQ3BFO0FBQ0E7QUFDQSx1QkFBdUIsNEVBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsNkNBQTZDLEVBQTZDO0FBQzFGLDRDQUE0QyxLQUF3QztBQUNwRixpQ0FBaUMsS0FBb0M7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGdGQUFjO0FBQy9FLCtEQUErRCx5Q0FBeUM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUSxFQUFFLE1BQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxrQkFBa0I7QUFDbEIsdUNBQXVDLFFBQVEsRUFBRSxRQUFRO0FBQ3pEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscUVBQVM7QUFDakIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbmRFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwaS11dGlsc1wiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvYWRtaW4vbWFuYWdlX3Byb2R1Y3RzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL21hbmFnZV9wcm9kdWN0c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL21hbmFnZV9wcm9kdWN0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kLFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJ1xufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvYWRtaW4vbWFuYWdlX3Byb2R1Y3RzXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH1cbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xuICAgICAgICBzcmNQYWdlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBxdWVyeSwgcGFyYW1zLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgICAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICAgICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICAgICAgY29uc3Qgb25SZXF1ZXN0RXJyb3IgPSByb3V0ZU1vZHVsZS5pbnN0cnVtZW50YXRpb25PblJlcXVlc3RFcnJvci5iaW5kKHJvdXRlTW9kdWxlKTtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PnJvdXRlTW9kdWxlLnJlbmRlcihyZXEsIHJlcywge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXNcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkUmV2YWxpZGF0ZUhlYWRlcktleXM6IHByb2Nlc3MuZW52Ll9fTkVYVF9BTExPV0VEX1JFVkFMSURBVEVfSEVBREVSUyxcbiAgICAgICAgICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGU6IEJvb2xlYW4ocHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERSksXG4gICAgICAgICAgICAgICAgdHJ1c3RIb3N0SGVhZGVyOiBwcm9jZXNzLmVudi5fX05FWFRfVFJVU1RfSE9TVF9IRUFERVIsXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogZ2V0IHRoaXMgZnJvbSBmcm9tIHJ1bnRpbWUgZW52IHNvIG1hbmlmZXN0XG4gICAgICAgICAgICAgICAgLy8gZG9lc24ndCBuZWVkIHRvIGxvYWRcbiAgICAgICAgICAgICAgICBwcmV2aWV3UHJvcHM6IHByZXJlbmRlck1hbmlmZXN0LnByZXZpZXcsXG4gICAgICAgICAgICAgICAgcHJvcGFnYXRlRXJyb3I6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRldjogcm91dGVNb2R1bGUuaXNEZXYsXG4gICAgICAgICAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL21hbmFnZV9wcm9kdWN0c1wiLFxuICAgICAgICAgICAgICAgIGludGVybmFsUmV2YWxpZGF0ZTogcm91dGVyU2VydmVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyU2VydmVyQ29udGV4dC5yZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIG9uRXJyb3I6ICguLi5hcmdzKT0+b25SZXF1ZXN0RXJyb3IocmVxLCAuLi5hcmdzKVxuICAgICAgICAgICAgfSkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaW52b2tlUm91dGVNb2R1bGUpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyB3ZSByZS10aHJvdyBpbiBkZXYgdG8gc2hvdyB0aGUgZXJyb3Igb3ZlcmxheVxuICAgICAgICBpZiAocm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzIGlzIHRlY2huaWNhbGx5IGFuIGludmFyaWFudCBhcyBlcnJvciBoYW5kbGluZ1xuICAgICAgICAvLyBzaG91bGQgYmUgZG9uZSBpbnNpZGUgb2YgYXBpLXJlc29sdmVyIG9uRXJyb3JcbiAgICAgICAgc2VuZEVycm9yKHJlcywgNTAwLCAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyk7XG4gICAgfSBmaW5hbGx5e1xuICAgICAgICAvLyBXZSBkb24ndCBhbGxvdyBhbnkgd2FpdFVudGlsIHdvcmsgaW4gcGFnZXMgQVBJIHJvdXRlcyBjdXJyZW50bHlcbiAgICAgICAgLy8gc28gaWYgY2FsbGJhY2sgaXMgcHJlc2VudCByZXR1cm4gd2l0aCByZXNvbHZlZCBwcm9taXNlIHNpbmNlIG5vXG4gICAgICAgIC8vIHBlbmRpbmcgd29ya1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmanage_products&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fmanage_products%2Findex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/admin/manage_products/index.js":
/*!**************************************************!*\
  !*** ./pages/api/admin/manage_products/index.js ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sqlite3 */ \"sqlite3\");\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(sqlite3__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var sqlite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sqlite */ \"sqlite\");\n/* harmony import */ var _lib_middleware_createAdminHandler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/middleware/createAdminHandler */ \"(api-node)/./lib/middleware/createAdminHandler.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sqlite__WEBPACK_IMPORTED_MODULE_2__, _lib_middleware_createAdminHandler__WEBPACK_IMPORTED_MODULE_3__]);\n([sqlite__WEBPACK_IMPORTED_MODULE_2__, _lib_middleware_createAdminHandler__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// /pages/api/admin/manage_products/index.js\n\n\n\n\nconst handler = (0,_lib_middleware_createAdminHandler__WEBPACK_IMPORTED_MODULE_3__.createAdminHandler)();\n// üß† Database setup\nconst dbPath = path__WEBPACK_IMPORTED_MODULE_0___default().join(process.cwd(), \"data\", \"shells_shop.db\");\nasync function openDB() {\n    return (0,sqlite__WEBPACK_IMPORTED_MODULE_2__.open)({\n        filename: dbPath,\n        driver: (sqlite3__WEBPACK_IMPORTED_MODULE_1___default().Database)\n    });\n}\n/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n   ‚úÖ GET: List all products\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */ handler.get(async (req, res)=>{\n    console.log(`[${req.rid}] üß† handler.get /api/admin/manage_products triggered`);\n    const db = await openDB();\n    // ‚úÖ check if \"created_at\" exists; fallback to \"id\"\n    let rows;\n    try {\n        rows = await db.all(\"SELECT * FROM products ORDER BY created_at DESC\");\n    } catch (err) {\n        console.warn(\"‚ö†Ô∏è 'created_at' column missing ‚Äî ordering by id DESC instead.\");\n        rows = await db.all(\"SELECT * FROM products ORDER BY id DESC\");\n    }\n    console.log(`[${req.rid}] ‚úÖ Retrieved ${rows.length} products`);\n    res.status(200).json({\n        ok: true,\n        success: true,\n        total: rows.length,\n        totalPages: 1,\n        products: rows\n    });\n    return; // ‚úÖ stop the middleware chain\n});\n/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n   ‚úÖ POST: Create new product\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */ handler.post(async (req, res)=>{\n    console.log(`[${req.rid}] [DEBUG] handler.post /api/admin/manage_products called`);\n    const db = await openDB();\n    // üßπ Validate input\n    const product = {\n        name: req.body?.name || \"\",\n        description: req.body?.description || \"\",\n        price: Number(req.body?.price) || 0,\n        stock: Number(req.body?.stock) || 0,\n        category: req.body?.category || \"uncategorized\",\n        image_url: req.body?.image_url || \"\",\n        image_public_id: req.body?.image_public_id || \"\",\n        is_active: 0,\n        is_favorite: 0\n    };\n    console.log(`[${req.rid}] üßæ Sanitized product:`, product);\n    try {\n        const result = await db.run(`INSERT INTO products (\n        name, description, price, stock, category,\n        image_url, image_public_id, is_active, is_favorite\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n            product.name,\n            product.description,\n            product.price,\n            product.stock,\n            product.category,\n            product.image_url,\n            product.image_public_id,\n            product.is_active,\n            product.is_favorite\n        ]);\n        console.log(`[${req.rid}] ‚úÖ [DB] Product inserted:`, {\n            id: result.lastID,\n            name: product.name,\n            price: product.price\n        });\n        res.status(201).json({\n            ok: true,\n            success: true,\n            message: \"Product created successfully\",\n            product: {\n                id: result.lastID,\n                ...product\n            }\n        });\n        return; // ‚úÖ stops next-connect from continuing\n    } catch (err) {\n        console.error(`[${req.rid}] ‚ùå DB insert failed:`, err);\n        res.status(500).json({\n            ok: false,\n            success: false,\n            error: \"Failed to insert product\",\n            details: err.message\n        });\n        return; // ‚úÖ stop chain\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler.attachFallback());\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9hZG1pbi9tYW5hZ2VfcHJvZHVjdHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLDRDQUE0QztBQUNwQjtBQUNNO0FBQ0E7QUFDMkM7QUFFekUsTUFBTUksVUFBVUQsc0ZBQWtCQTtBQUVsQyxvQkFBb0I7QUFDcEIsTUFBTUUsU0FBU0wsZ0RBQVMsQ0FBQ08sUUFBUUMsR0FBRyxJQUFJLFFBQVE7QUFDaEQsZUFBZUM7SUFDYixPQUFPUCw0Q0FBSUEsQ0FBQztRQUFFUSxVQUFVTDtRQUFRTSxRQUFRVix5REFBZ0I7SUFBQztBQUMzRDtBQUVBOztnQ0FFZ0MsR0FDaENHLFFBQVFTLEdBQUcsQ0FBQyxPQUFPQyxLQUFLQztJQUN0QkMsUUFBUUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFSCxJQUFJSSxHQUFHLENBQUMscURBQXFELENBQUM7SUFFOUUsTUFBTUMsS0FBSyxNQUFNVjtJQUVqQixtREFBbUQ7SUFDbkQsSUFBSVc7SUFDSixJQUFJO1FBQ0ZBLE9BQU8sTUFBTUQsR0FBR0UsR0FBRyxDQUFDO0lBQ3RCLEVBQUUsT0FBT0MsS0FBSztRQUNaTixRQUFRTyxJQUFJLENBQUM7UUFDYkgsT0FBTyxNQUFNRCxHQUFHRSxHQUFHLENBQUM7SUFDdEI7SUFFQUwsUUFBUUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFSCxJQUFJSSxHQUFHLENBQUMsY0FBYyxFQUFFRSxLQUFLSSxNQUFNLENBQUMsU0FBUyxDQUFDO0lBQzlEVCxJQUFJVSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1FBQ25CQyxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBT1QsS0FBS0ksTUFBTTtRQUNsQk0sWUFBWTtRQUNaQyxVQUFVWDtJQUNaO0lBRUEsUUFBUSw4QkFBOEI7QUFDeEM7QUFFQTs7Z0NBRWdDLEdBQ2hDaEIsUUFBUTRCLElBQUksQ0FBQyxPQUFPbEIsS0FBS0M7SUFDdkJDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRUgsSUFBSUksR0FBRyxDQUFDLHdEQUF3RCxDQUFDO0lBRWpGLE1BQU1DLEtBQUssTUFBTVY7SUFFakIsb0JBQW9CO0lBQ3BCLE1BQU13QixVQUFVO1FBQ2RDLE1BQU1wQixJQUFJcUIsSUFBSSxFQUFFRCxRQUFRO1FBQ3hCRSxhQUFhdEIsSUFBSXFCLElBQUksRUFBRUMsZUFBZTtRQUN0Q0MsT0FBT0MsT0FBT3hCLElBQUlxQixJQUFJLEVBQUVFLFVBQVU7UUFDbENFLE9BQU9ELE9BQU94QixJQUFJcUIsSUFBSSxFQUFFSSxVQUFVO1FBQ2xDQyxVQUFVMUIsSUFBSXFCLElBQUksRUFBRUssWUFBWTtRQUNoQ0MsV0FBVzNCLElBQUlxQixJQUFJLEVBQUVNLGFBQWE7UUFDbENDLGlCQUFpQjVCLElBQUlxQixJQUFJLEVBQUVPLG1CQUFtQjtRQUM5Q0MsV0FBVztRQUNYQyxhQUFhO0lBQ2Y7SUFFQTVCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRUgsSUFBSUksR0FBRyxDQUFDLHVCQUF1QixDQUFDLEVBQUVlO0lBRWxELElBQUk7UUFDRixNQUFNWSxTQUFTLE1BQU0xQixHQUFHMkIsR0FBRyxDQUN6QixDQUFDOzs7MENBR21DLENBQUMsRUFDckM7WUFDRWIsUUFBUUMsSUFBSTtZQUNaRCxRQUFRRyxXQUFXO1lBQ25CSCxRQUFRSSxLQUFLO1lBQ2JKLFFBQVFNLEtBQUs7WUFDYk4sUUFBUU8sUUFBUTtZQUNoQlAsUUFBUVEsU0FBUztZQUNqQlIsUUFBUVMsZUFBZTtZQUN2QlQsUUFBUVUsU0FBUztZQUNqQlYsUUFBUVcsV0FBVztTQUNwQjtRQUdINUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFSCxJQUFJSSxHQUFHLENBQUMsMEJBQTBCLENBQUMsRUFBRTtZQUNuRDZCLElBQUlGLE9BQU9HLE1BQU07WUFDakJkLE1BQU1ELFFBQVFDLElBQUk7WUFDbEJHLE9BQU9KLFFBQVFJLEtBQUs7UUFDdEI7UUFFQXRCLElBQUlVLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJDLElBQUk7WUFDSkMsU0FBUztZQUNUcUIsU0FBUztZQUNUaEIsU0FBUztnQkFBRWMsSUFBSUYsT0FBT0csTUFBTTtnQkFBRSxHQUFHZixPQUFPO1lBQUM7UUFDM0M7UUFFQSxRQUFRLHVDQUF1QztJQUNqRCxFQUFFLE9BQU9YLEtBQUs7UUFDWk4sUUFBUWtDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRXBDLElBQUlJLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFSTtRQUNsRFAsSUFBSVUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQkMsSUFBSTtZQUNKQyxTQUFTO1lBQ1RzQixPQUFPO1lBQ1BDLFNBQVM3QixJQUFJMkIsT0FBTztRQUN0QjtRQUNBLFFBQVEsZUFBZTtJQUN6QjtBQUNGO0FBRUEsaUVBQWU3QyxRQUFRZ0QsY0FBYyxFQUFFLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9lbW9udGF6ZXJpL0RvY3VtZW50cy9wcm9qZWN0cy9zaGVsbC1zdG9yaWVzLXN0dWRpby9wYWdlcy9hcGkvYWRtaW4vbWFuYWdlX3Byb2R1Y3RzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIC9wYWdlcy9hcGkvYWRtaW4vbWFuYWdlX3Byb2R1Y3RzL2luZGV4LmpzXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHNxbGl0ZTMgZnJvbSBcInNxbGl0ZTNcIjtcbmltcG9ydCB7IG9wZW4gfSBmcm9tIFwic3FsaXRlXCI7XG5pbXBvcnQgeyBjcmVhdGVBZG1pbkhhbmRsZXIgfSBmcm9tIFwiQC9saWIvbWlkZGxld2FyZS9jcmVhdGVBZG1pbkhhbmRsZXJcIjtcblxuY29uc3QgaGFuZGxlciA9IGNyZWF0ZUFkbWluSGFuZGxlcigpO1xuXG4vLyDwn6egIERhdGFiYXNlIHNldHVwXG5jb25zdCBkYlBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJkYXRhXCIsIFwic2hlbGxzX3Nob3AuZGJcIik7XG5hc3luYyBmdW5jdGlvbiBvcGVuREIoKSB7XG4gIHJldHVybiBvcGVuKHsgZmlsZW5hbWU6IGRiUGF0aCwgZHJpdmVyOiBzcWxpdGUzLkRhdGFiYXNlIH0pO1xufVxuXG4vKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcbiAgIOKchSBHRVQ6IExpc3QgYWxsIHByb2R1Y3RzXG7ilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbmhhbmRsZXIuZ2V0KGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZyhgWyR7cmVxLnJpZH1dIPCfp6AgaGFuZGxlci5nZXQgL2FwaS9hZG1pbi9tYW5hZ2VfcHJvZHVjdHMgdHJpZ2dlcmVkYCk7XG5cbiAgY29uc3QgZGIgPSBhd2FpdCBvcGVuREIoKTtcblxuICAvLyDinIUgY2hlY2sgaWYgXCJjcmVhdGVkX2F0XCIgZXhpc3RzOyBmYWxsYmFjayB0byBcImlkXCJcbiAgbGV0IHJvd3M7XG4gIHRyeSB7XG4gICAgcm93cyA9IGF3YWl0IGRiLmFsbChcIlNFTEVDVCAqIEZST00gcHJvZHVjdHMgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDXCIpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oXCLimqDvuI8gJ2NyZWF0ZWRfYXQnIGNvbHVtbiBtaXNzaW5nIOKAlCBvcmRlcmluZyBieSBpZCBERVNDIGluc3RlYWQuXCIpO1xuICAgIHJvd3MgPSBhd2FpdCBkYi5hbGwoXCJTRUxFQ1QgKiBGUk9NIHByb2R1Y3RzIE9SREVSIEJZIGlkIERFU0NcIik7XG4gIH1cblxuICBjb25zb2xlLmxvZyhgWyR7cmVxLnJpZH1dIOKchSBSZXRyaWV2ZWQgJHtyb3dzLmxlbmd0aH0gcHJvZHVjdHNgKTtcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIG9rOiB0cnVlLFxuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgdG90YWw6IHJvd3MubGVuZ3RoLFxuICAgIHRvdGFsUGFnZXM6IDEsXG4gICAgcHJvZHVjdHM6IHJvd3MsXG4gIH0pO1xuXG4gIHJldHVybjsgLy8g4pyFIHN0b3AgdGhlIG1pZGRsZXdhcmUgY2hhaW5cbn0pO1xuXG4vKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcbiAgIOKchSBQT1NUOiBDcmVhdGUgbmV3IHByb2R1Y3RcbuKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuaGFuZGxlci5wb3N0KGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZyhgWyR7cmVxLnJpZH1dIFtERUJVR10gaGFuZGxlci5wb3N0IC9hcGkvYWRtaW4vbWFuYWdlX3Byb2R1Y3RzIGNhbGxlZGApO1xuXG4gIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRCKCk7XG5cbiAgLy8g8J+nuSBWYWxpZGF0ZSBpbnB1dFxuICBjb25zdCBwcm9kdWN0ID0ge1xuICAgIG5hbWU6IHJlcS5ib2R5Py5uYW1lIHx8IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IHJlcS5ib2R5Py5kZXNjcmlwdGlvbiB8fCBcIlwiLFxuICAgIHByaWNlOiBOdW1iZXIocmVxLmJvZHk/LnByaWNlKSB8fCAwLFxuICAgIHN0b2NrOiBOdW1iZXIocmVxLmJvZHk/LnN0b2NrKSB8fCAwLFxuICAgIGNhdGVnb3J5OiByZXEuYm9keT8uY2F0ZWdvcnkgfHwgXCJ1bmNhdGVnb3JpemVkXCIsXG4gICAgaW1hZ2VfdXJsOiByZXEuYm9keT8uaW1hZ2VfdXJsIHx8IFwiXCIsXG4gICAgaW1hZ2VfcHVibGljX2lkOiByZXEuYm9keT8uaW1hZ2VfcHVibGljX2lkIHx8IFwiXCIsXG4gICAgaXNfYWN0aXZlOiAwLFxuICAgIGlzX2Zhdm9yaXRlOiAwLFxuICB9O1xuXG4gIGNvbnNvbGUubG9nKGBbJHtyZXEucmlkfV0g8J+nviBTYW5pdGl6ZWQgcHJvZHVjdDpgLCBwcm9kdWN0KTtcblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLnJ1bihcbiAgICAgIGBJTlNFUlQgSU5UTyBwcm9kdWN0cyAoXG4gICAgICAgIG5hbWUsIGRlc2NyaXB0aW9uLCBwcmljZSwgc3RvY2ssIGNhdGVnb3J5LFxuICAgICAgICBpbWFnZV91cmwsIGltYWdlX3B1YmxpY19pZCwgaXNfYWN0aXZlLCBpc19mYXZvcml0ZVxuICAgICAgKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcbiAgICAgIFtcbiAgICAgICAgcHJvZHVjdC5uYW1lLFxuICAgICAgICBwcm9kdWN0LmRlc2NyaXB0aW9uLFxuICAgICAgICBwcm9kdWN0LnByaWNlLFxuICAgICAgICBwcm9kdWN0LnN0b2NrLFxuICAgICAgICBwcm9kdWN0LmNhdGVnb3J5LFxuICAgICAgICBwcm9kdWN0LmltYWdlX3VybCxcbiAgICAgICAgcHJvZHVjdC5pbWFnZV9wdWJsaWNfaWQsXG4gICAgICAgIHByb2R1Y3QuaXNfYWN0aXZlLFxuICAgICAgICBwcm9kdWN0LmlzX2Zhdm9yaXRlLFxuICAgICAgXVxuICAgICk7XG5cbiAgICBjb25zb2xlLmxvZyhgWyR7cmVxLnJpZH1dIOKchSBbREJdIFByb2R1Y3QgaW5zZXJ0ZWQ6YCwge1xuICAgICAgaWQ6IHJlc3VsdC5sYXN0SUQsXG4gICAgICBuYW1lOiBwcm9kdWN0Lm5hbWUsXG4gICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcbiAgICB9KTtcblxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIG9rOiB0cnVlLFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IFwiUHJvZHVjdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgcHJvZHVjdDogeyBpZDogcmVzdWx0Lmxhc3RJRCwgLi4ucHJvZHVjdCB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuOyAvLyDinIUgc3RvcHMgbmV4dC1jb25uZWN0IGZyb20gY29udGludWluZ1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGBbJHtyZXEucmlkfV0g4p2MIERCIGluc2VydCBmYWlsZWQ6YCwgZXJyKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBvazogZmFsc2UsXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBpbnNlcnQgcHJvZHVjdFwiLFxuICAgICAgZGV0YWlsczogZXJyLm1lc3NhZ2UsXG4gICAgfSk7XG4gICAgcmV0dXJuOyAvLyDinIUgc3RvcCBjaGFpblxuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlci5hdHRhY2hGYWxsYmFjaygpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIl0sIm5hbWVzIjpbInBhdGgiLCJzcWxpdGUzIiwib3BlbiIsImNyZWF0ZUFkbWluSGFuZGxlciIsImhhbmRsZXIiLCJkYlBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsIm9wZW5EQiIsImZpbGVuYW1lIiwiZHJpdmVyIiwiRGF0YWJhc2UiLCJnZXQiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwicmlkIiwiZGIiLCJyb3dzIiwiYWxsIiwiZXJyIiwid2FybiIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJvayIsInN1Y2Nlc3MiLCJ0b3RhbCIsInRvdGFsUGFnZXMiLCJwcm9kdWN0cyIsInBvc3QiLCJwcm9kdWN0IiwibmFtZSIsImJvZHkiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwiTnVtYmVyIiwic3RvY2siLCJjYXRlZ29yeSIsImltYWdlX3VybCIsImltYWdlX3B1YmxpY19pZCIsImlzX2FjdGl2ZSIsImlzX2Zhdm9yaXRlIiwicmVzdWx0IiwicnVuIiwiaWQiLCJsYXN0SUQiLCJtZXNzYWdlIiwiZXJyb3IiLCJkZXRhaWxzIiwiYXR0YWNoRmFsbGJhY2siXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/admin/manage_products/index.js\n");

/***/ }),

/***/ "@upstash/redis":
/*!*********************************!*\
  !*** external "@upstash/redis" ***!
  \*********************************/
/***/ ((module) => {

module.exports = import("@upstash/redis");;

/***/ }),

/***/ "next-auth/jwt":
/*!********************************!*\
  !*** external "next-auth/jwt" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("next-auth/jwt");

/***/ }),

/***/ "next-connect":
/*!*******************************!*\
  !*** external "next-connect" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("next-connect");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "redis":
/*!************************!*\
  !*** external "redis" ***!
  \************************/
/***/ ((module) => {

module.exports = require("redis");

/***/ }),

/***/ "sqlite":
/*!*************************!*\
  !*** external "sqlite" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("sqlite");;

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmanage_products&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fmanage_products%2Findex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();